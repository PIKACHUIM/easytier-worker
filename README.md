# EasyTier èŠ‚ç‚¹ç®¡ç†ç³»ç»Ÿ

ğŸš€ **ç°ä»£åŒ–çš„ EasyTier èŠ‚ç‚¹ç®¡ç†å¹³å°**ï¼Œè®©èŠ‚ç‚¹ç®¡ç†å˜å¾—ç®€å•é«˜æ•ˆï¼

[![License](https://img.shields.io/badge/License-GPL%203.0-blue.svg)](LICENSE)
[![Cloudflare Workers](https://img.shields.io/badge/Platform-Cloudflare%20Workers-orange.svg)](https://workers.cloudflare.com/)
[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?logo=typescript&logoColor=white)](https://www.typescriptlang.org/)

> åŸºäº Cloudflare Workers å’Œ D1 æ•°æ®åº“æ„å»ºçš„ç°ä»£åŒ–èŠ‚ç‚¹ç®¡ç†ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„ç”¨æˆ·æƒé™ç®¡ç†ã€æ™ºèƒ½è´Ÿè½½å‡è¡¡å’Œå®æ—¶ç›‘æ§åŠŸèƒ½ã€‚

---

## âœ¨ ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬ï¼Ÿ

### ğŸ¯ **å¼€ç®±å³ç”¨**
- é›¶é…ç½®éƒ¨ç½²ï¼Œä¸€é”®åˆå§‹åŒ–
- å¯è§†åŒ–ç®¡ç†ç•Œé¢ï¼Œæ— éœ€å‘½ä»¤è¡Œæ“ä½œ
- å†…ç½®æ™ºèƒ½è´Ÿè½½å‡è¡¡ç®—æ³•

### ğŸ” **ä¼ä¸šçº§å®‰å…¨**
- JWT å¯†é’¥éªŒè¯çš„åˆå§‹åŒ–æœºåˆ¶
- ä¸‰çº§æƒé™ç®¡ç†ä½“ç³»
- bcrypt åŠ å¯†å­˜å‚¨å¯†ç 

### ğŸ“Š **æ™ºèƒ½ç›‘æ§**
- å®æ—¶èŠ‚ç‚¹çŠ¶æ€ç›‘æ§
- 30å¤©è´Ÿè·å†å²è®°å½•
- å¤šç»´åº¦ç»Ÿè®¡åˆ†æ

### ğŸŒ **å…¨çƒéƒ¨ç½²**
- åŸºäº Cloudflare è¾¹ç¼˜ç½‘ç»œ
- è‡ªåŠ¨å…¨çƒ CDN åŠ é€Ÿ
- 99.9% å¯ç”¨æ€§ä¿è¯

---

## ğŸš€ å¿«é€Ÿä½“éªŒ

### 1. ä¸€é”®éƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/easytierwork.git
cd easytierwork

# å®‰è£…ä¾èµ–
npm install

# åˆ›å»ºæ•°æ®åº“
npx wrangler d1 create easytier-db

# é…ç½®ç¯å¢ƒï¼ˆç¼–è¾‘ wrangler.jsoncï¼‰
# å¡«å…¥ä½ çš„ database_id å’Œ JWT_SECRET

# éƒ¨ç½²åˆ° Cloudflare
npm run deploy
```

### 2. åˆå§‹åŒ–ç³»ç»Ÿ

è®¿é—® `https://your-domain.workers.dev/initialize`ï¼Œåªéœ€ä¸‰æ­¥ï¼š

1. ğŸ”‘ è¾“å…¥ JWT å¯†é’¥ï¼ˆæ¥è‡ªé…ç½®æ–‡ä»¶ï¼‰
2. ğŸ“§ è®¾ç½®è¶…çº§ç®¡ç†å‘˜é‚®ç®±
3. ğŸ” åˆ›å»ºç®¡ç†å‘˜å¯†ç 

å°±è¿™ä¹ˆç®€å•ï¼ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºæ‰€æœ‰å¿…éœ€çš„æ•°æ®è¡¨å’Œé…ç½®ã€‚

### 3. å¼€å§‹ä½¿ç”¨

- ğŸ‘¤ **ç®¡ç†å‘˜**: ç™»å½•åå°ç®¡ç†èŠ‚ç‚¹å’Œç”¨æˆ·
- ğŸ“± **ç”¨æˆ·**: æ³¨å†Œè´¦æˆ·å¹¶æ·»åŠ è‡ªå·±çš„èŠ‚ç‚¹
- ğŸ”Œ **å¼€å‘è€…**: ä½¿ç”¨ API æ¥å…¥å®¢æˆ·ç«¯

---

## ğŸ¬ åŠŸèƒ½æ¼”ç¤º

### ğŸ“ˆ **æ™ºèƒ½è´Ÿè½½å‡è¡¡**

æˆ‘ä»¬æä¾›ä¸‰ç§æ™ºèƒ½è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼š

```python
# æµé‡ä¼˜å…ˆ - åŸºäºäººå‡æ—¥æµé‡
response = requests.post('/api/query', {
    "region": "domestic",
    "priority": "traffic"
})

# å¸¦å®½ä¼˜å…ˆ - åŸºäºäººå‡å¸¦å®½  
response = requests.post('/api/query', {
    "region": "overseas", 
    "priority": "bandwidth"
})

# å»¶è¿Ÿä¼˜å…ˆ - åŸºäºè¿æ¥æ•°é‡
response = requests.post('/api/query', {
    "priority": "latency"
})
```

### ğŸ“Š **èŠ‚ç‚¹ç›‘æ§é¢æ¿**

å®æ—¶å±•ç¤ºå…³é”®æŒ‡æ ‡ï¼š
- ğŸŒ æ€»èŠ‚ç‚¹æ•°ï¼šåœ¨çº¿/ç¦»çº¿çŠ¶æ€
- ğŸ“¶ æ€»å¸¦å®½ï¼šå½“å‰/é˜¶æ¢¯/æœ€å¤§å¸¦å®½
- ğŸ‘¥ è¿æ¥æ•°ï¼šå®æ—¶è¿æ¥ç»Ÿè®¡
- ğŸ“ˆ æµé‡ä½¿ç”¨ï¼šå·²ç”¨/å‰©ä½™æµé‡

### ğŸ” **æƒé™ç®¡ç†ä½“ç³»**

```
è¶…çº§ç®¡ç†å‘˜ â”€â”€â”€â”€â”€â”¬â”€â”€ ç®¡ç†æ‰€æœ‰ç”¨æˆ·
               â”œâ”€â”€ ä¿®æ”¹ç³»ç»Ÿè®¾ç½®  
               â””â”€â”€ æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹

æ™®é€šç®¡ç†å‘˜ â”€â”€â”€â”€â”€â”¬â”€â”€ æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹
               â”œâ”€â”€ ä¿®æ”¹ç³»ç»Ÿè®¾ç½®
               â””â”€â”€ ç®¡ç†è‡ªå·±çš„èŠ‚ç‚¹

æ™®é€šç”¨æˆ· â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€ ç®¡ç†è‡ªå·±çš„èŠ‚ç‚¹
```

---

## ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½

### ğŸ‘¥ **ç”¨æˆ·ç®¡ç†**
- âœ… ç”¨æˆ·æ³¨å†Œä¸é‚®ç®±éªŒè¯
- âœ… JWT å®‰å…¨è®¤è¯
- âœ… å¯†ç åŠ å¯†å­˜å‚¨
- âœ… ä¸‰çº§æƒé™æ§åˆ¶

### ğŸ–¥ï¸ **èŠ‚ç‚¹ç®¡ç†** 
- âœ… å¤šè¿æ¥æ–¹å¼æ”¯æŒï¼ˆTCP/UDP/WS/WSS/WGï¼‰
- âœ… å®æ—¶çŠ¶æ€ç›‘æ§
- âœ… å¸¦å®½ä¸æµé‡ç»Ÿè®¡
- âœ… è‡ªå®šä¹‰æ ‡ç­¾å’Œå¤‡æ³¨
- âœ… ä¸­è½¬åŠŸèƒ½å¼€å…³

### ğŸ¤– **æ™ºèƒ½ API**
- âœ… èŠ‚ç‚¹è‡ªåŠ¨ä¸ŠæŠ¥ï¼ˆToken éªŒè¯ï¼‰
- âœ… æ™ºèƒ½è´Ÿè½½å‡è¡¡æŸ¥è¯¢
- âœ… åœ°åŸŸç­›é€‰ï¼ˆå›½å†…/æµ·å¤–ï¼‰
- âœ… ç»Ÿè®¡ä¿¡æ¯æ¥å£

### âš™ï¸ **ç³»ç»Ÿç®¡ç†**
- âœ… Web ç•Œé¢åˆå§‹åŒ–
- âœ… åŠ¨æ€ç³»ç»Ÿé…ç½®
- âœ… é‚®ä»¶æœåŠ¡é›†æˆï¼ˆResendï¼‰
- âœ… ç”¨æˆ·æƒé™ç®¡ç†

---

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

```mermaid
graph TB
    A[ç”¨æˆ·ç•Œé¢] --> B[Hono Web æ¡†æ¶]
    B --> C[Cloudflare Workers]
    C --> D[Cloudflare D1 æ•°æ®åº“]
    C --> E[Resend é‚®ä»¶æœåŠ¡]
    
    F[èŠ‚ç‚¹å®¢æˆ·ç«¯] --> G[ä¸ŠæŠ¥ API]
    G --> C
    
    H[ç»ˆç«¯ç”¨æˆ·] --> I[æŸ¥è¯¢ API]
    I --> C
    
    C --> J[JWT è®¤è¯]
    C --> K[æƒé™ä¸­é—´ä»¶]
```

### æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|----------|------|
| **è¿è¡Œç¯å¢ƒ** | Cloudflare Workers | å…¨çƒè¾¹ç¼˜ç½‘ç»œï¼Œé›¶å†·å¯åŠ¨ |
| **æ•°æ®åº“** | Cloudflare D1 | å…¼å®¹ SQLiteï¼Œ10GB å…è´¹ |
| **Web æ¡†æ¶** | Hono | è½»é‡çº§ï¼ŒTypeScript åŸç”Ÿæ”¯æŒ |
| **å‰ç«¯** | TypeScript + JSX | ç»„ä»¶åŒ–å¼€å‘ï¼Œç±»å‹å®‰å…¨ |
| **è®¤è¯** | JWT | æ— çŠ¶æ€è®¤è¯ï¼Œæ”¯æŒåˆ†å¸ƒå¼ |
| **åŠ å¯†** | bcrypt | å¯†ç å“ˆå¸Œï¼Œé˜²å½©è™¹è¡¨æ”»å‡» |
| **é‚®ä»¶** | Resend | ç°ä»£åŒ–é‚®ä»¶æœåŠ¡ |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
easytierwork/
â”œâ”€â”€ ğŸ“‚ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ ğŸ“‚ routes/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.ts          # ç”¨æˆ·è®¤è¯
â”‚   â”‚   â”œâ”€â”€ nodes.ts         # èŠ‚ç‚¹ç®¡ç†  
â”‚   â”‚   â”œâ”€â”€ api.ts           # å…¬å¼€ API
â”‚   â”‚   â””â”€â”€ system.ts        # ç³»ç»Ÿç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“‚ client/           # å‰ç«¯è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ home.ts         # é¦–é¡µé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ dashboard.ts    # ä»ªè¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ admin.ts        # ç®¡ç†é¢æ¿
â”‚   â”‚   â””â”€â”€ settings.ts     # ç³»ç»Ÿè®¾ç½®
â”‚   â”œâ”€â”€ index.tsx           # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ types.ts            # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils.ts            # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ style.css           # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ ğŸ“‚ examples/             # ç¤ºä¾‹è„šæœ¬
â”‚   â”œâ”€â”€ node_reporter.py    # èŠ‚ç‚¹ä¸ŠæŠ¥
â”‚   â”œâ”€â”€ client_query.py     # å®¢æˆ·ç«¯æŸ¥è¯¢
â”‚   â””â”€â”€ test_system.py      # ç³»ç»Ÿæµ‹è¯•
â”œâ”€â”€ ğŸ“‚ docs/                # æ ¸å¿ƒæ–‡æ¡£
â”‚   â”œâ”€â”€ README.md          # å®Œæ•´ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ API.md             # API æ¥å£æ–‡æ¡£
â”‚   â””â”€â”€ CONTRIBUTING.md    # è´¡çŒ®æŒ‡å—
â”œâ”€â”€ schema.sql             # æ•°æ®åº“ç»“æ„
â”œâ”€â”€ wrangler.jsonc         # Cloudflare é…ç½®
â””â”€â”€ package.json           # é¡¹ç›®é…ç½®
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### ğŸ¢ **ä¼ä¸šçº§åº”ç”¨**
- å†…éƒ¨ç½‘ç»œèŠ‚ç‚¹ç®¡ç†
- VPN æœåŠ¡èŠ‚ç‚¹ç›‘æ§
- è´Ÿè½½å‡è¡¡é›†ç¾¤ç®¡ç†

### ğŸŒ **æœåŠ¡æä¾›å•†**
- CDN èŠ‚ç‚¹ç®¡ç†
- æ¸¸æˆåŠ é€ŸæœåŠ¡
- è§†é¢‘æµåª’ä½“åˆ†å‘

### ğŸ‘¥ **ç¤¾åŒºé¡¹ç›®**
- å¼€æºç½‘ç»œé¡¹ç›®
- å­¦æœ¯ç ”ç©¶å¹³å°
- æŠ€æœ¯æ¼”ç¤ºç³»ç»Ÿ

---

## ğŸ“– API ç¤ºä¾‹

### ğŸ”— èŠ‚ç‚¹ä¸ŠæŠ¥
```bash
curl -X POST https://your-domain.workers.dev/api/report \
  -H "Content-Type: application/json" \
  -d '{
    "node_name": "beijing-node-1",
    "email": "admin@example.com", 
    "token": "your-secret-token",
    "current_bandwidth": 150.5,
    "reported_traffic": 2.3,
    "connection_count": 25,
    "status": "online"
  }'
```

### ğŸ” æ™ºèƒ½æŸ¥è¯¢
```bash
curl -X POST https://your-domain.workers.dev/api/query \
  -H "Content-Type: application/json" \
  -d '{
    "region": "domestic",
    "priority": "traffic",
    "relay_only": false
  }'
```

### ğŸ“Š è·å–ç»Ÿè®¡
```bash
curl https://your-domain.workers.dev/api/stats
```

---

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

### ğŸ”’ **å¤šå±‚å®‰å…¨é˜²æŠ¤**
- **åˆå§‹åŒ–å®‰å…¨**: JWT å¯†é’¥éªŒè¯ï¼Œé˜²æ­¢æ¶æ„åˆå§‹åŒ–
- **ä¼ è¾“å®‰å…¨**: å¼ºåˆ¶ HTTPSï¼Œæ•°æ®åŠ å¯†ä¼ è¾“  
- **è®¤è¯å®‰å…¨**: JWT Token + bcrypt å¯†ç åŠ å¯†
- **æƒé™å®‰å…¨**: ç»†ç²’åº¦æƒé™æ§åˆ¶ï¼Œæœ€å°æƒé™åŸåˆ™
- **æ•°æ®å®‰å…¨**: SQL æ³¨å…¥é˜²æŠ¤ï¼ŒXSS é˜²æŠ¤

### ğŸš¨ **å®‰å…¨æœ€ä½³å®è·µ**
- âœ… å¼ºåˆ¶ HTTPS è¿æ¥
- âœ… å¯†ç å¼ºåº¦è¦æ±‚ï¼ˆæœ€å°‘ 6 ä½ï¼‰
- âœ… JWT Token è¿‡æœŸæœºåˆ¶
- âœ… SQL å‚æ•°åŒ–æŸ¥è¯¢
- âœ… è¾“å…¥æ•°æ®éªŒè¯å’Œæ¸…ç†
- âœ… CORS è·¨åŸŸä¿æŠ¤

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **å“åº”æ—¶é—´** | < 100ms | å…¨çƒè¾¹ç¼˜ç½‘ç»œ |
| **å¹¶å‘æ”¯æŒ** | æ— é™åˆ¶ | Cloudflare Workers |
| **æ•°æ®åº“å®¹é‡** | 10GB | å…è´¹é¢åº¦ |
| **æ—¥è¯·æ±‚æ•°** | 100ä¸‡+ | å…è´¹é¢åº¦ |
| **å¯ç”¨æ€§** | 99.9% | Cloudflare SLA |

---

## ğŸ”§ å¼€å‘æŒ‡å—

### ğŸ—ï¸ æœ¬åœ°å¼€å‘
```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—® http://localhost:8787
```

### ğŸ“ æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ `src/routes/` åˆ›å»ºæ–°çš„è·¯ç”±æ–‡ä»¶
2. åœ¨ `src/index.tsx` æ³¨å†Œè·¯ç”±
3. æ›´æ–° API æ–‡æ¡£

### ğŸ§ª è¿è¡Œæµ‹è¯•
```bash
# æµ‹è¯• API æ¥å£
cd examples
python test_system.py

# æµ‹è¯•è´Ÿè½½å‡è¡¡
python client_query.py
```

---

## ğŸ“š æ ¸å¿ƒæ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [ğŸ“– docs/README.md](./docs/README.md) | å®Œæ•´ä½¿ç”¨æŒ‡å— - åŒ…å«å¿«é€Ÿå¼€å§‹ã€ç”¨æˆ·ç®¡ç†ã€APIä½¿ç”¨ç­‰ â­ |
| [ğŸ”§ docs/API.md](./docs/API.md) | å®Œæ•´çš„ API æ¥å£æ–‡æ¡£ |
| [ğŸ¤ docs/CONTRIBUTING.md](./docs/CONTRIBUTING.md) | è´¡çŒ®æŒ‡å— - æ¬¢è¿æäº¤ä»£ç å’Œå»ºè®® |

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### â“ **ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥ï¼Ÿ**
ç¡®ä¿ JWT å¯†é’¥æ­£ç¡®ï¼Œæ£€æŸ¥ `wrangler.jsonc` é…ç½®ã€‚

### â“ **é‚®ä»¶å‘é€ä¸æˆåŠŸï¼Ÿ**  
æ£€æŸ¥ Resend API å¯†é’¥å’ŒåŸŸåéªŒè¯çŠ¶æ€ã€‚

### â“ **èŠ‚ç‚¹ä¸ŠæŠ¥ Token æ— æ•ˆï¼Ÿ**
åœ¨èŠ‚ç‚¹ç®¡ç†é¡µé¢é‡æ–°ç”Ÿæˆ Tokenã€‚

### â“ **æŸ¥è¯¢è¿”å›ç©ºç»“æœï¼Ÿ**
æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€æ˜¯å¦ä¸º onlineï¼Œåœ°åŸŸç­›é€‰æ˜¯å¦æ­£ç¡®ã€‚

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### ğŸŒŸ **è´¡çŒ®æ–¹å¼**
- ğŸ› æŠ¥å‘Š Bug
- ğŸ’¡ æå‡ºåŠŸèƒ½å»ºè®®  
- ğŸ“ æ”¹è¿›æ–‡æ¡£
- ğŸ”§ æäº¤ä»£ç 

### ğŸ“‹ **æäº¤æµç¨‹**
1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. å‘èµ· Pull Request

---

## ğŸ“ è”ç³»æˆ‘ä»¬

- ğŸ“§ **é‚®ç®±**: your-email@example.com
- ğŸ› **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/yourusername/easytierwork/issues)
- ğŸ“– **æ–‡æ¡£**: [åœ¨çº¿æ–‡æ¡£](https://your-domain.workers.dev/docs)
- ğŸ’¬ **äº¤æµç¾¤**: [åŠ å…¥è®¨è®º](https://github.com/yourusername/easytierwork/discussions)

---

## ğŸ“œ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº [GPL-3.0 åè®®](LICENSE) å¼€æºï¼Œå…è®¸è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘ã€‚

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**

Made with â¤ï¸ by EasyTier Team

</div>