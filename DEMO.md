# 功能演示指南

本文档提供详细的功能演示步骤，帮助您快速了解系统的各项功能。

## 🎬 演示环境准备

### 1. 启动本地开发服务器

```bash
npm run dev
```

访问 http://localhost:8787

### 2. 准备测试数据

- JWT 密钥：从 `wrangler.jsonc` 获取
- 测试邮箱：准备 2-3 个测试邮箱
- 测试密码：使用简单密码（如 `test123456`）

## 📝 功能演示流程

### 演示 1: 系统初始化 (5 分钟)

**目标**: 展示如何通过 Web 界面初始化系统

**步骤**:

1. **访问初始化页面**
   - 打开 http://localhost:8787/initialize
   - 展示初始化表单

2. **填写初始化信息**
   ```
   JWT 密钥: [从 wrangler.jsonc 复制]
   管理员邮箱: admin@example.com
   密码: Admin123456!
   确认密码: Admin123456!
   ```

3. **提交初始化**
   - 点击"初始化系统"按钮
   - 展示成功消息
   - 自动跳转到登录页面

4. **验证初始化**
   - 再次访问 /initialize
   - 展示"系统已初始化"提示
   - 说明：系统只能初始化一次

**要点**:
- ✅ JWT 密钥验证确保安全性
- ✅ 无需操作数据库
- ✅ 一次性初始化防止重复

---

### 演示 2: 用户登录和权限 (5 分钟)

**目标**: 展示三级权限系统

**步骤**:

1. **超级管理员登录**
   - 使用刚创建的管理员账户登录
   - 展示仪表板
   - 展示导航菜单（包含"系统设置"）

2. **查看用户信息**
   - 展示用户邮箱
   - 展示管理员标记
   - 展示超级管理员标记

3. **访问系统设置**
   - 点击"系统设置"
   - 展示系统设置页面
   - 展示用户管理部分

**要点**:
- ✅ 超级管理员拥有所有权限
- ✅ 可以访问系统设置
- ✅ 可以管理用户

---

### 演示 3: 系统设置管理 (10 分钟)

**目标**: 展示动态配置管理

**步骤**:

1. **配置邮件服务**
   ```
   Resend API 密钥: re_xxxxx
   发件人邮箱: noreply@example.com
   发件域名: example.com
   ```
   - 填写配置
   - 点击"保存设置"
   - 展示成功消息

2. **配置网站信息**
   ```
   网站名称: EasyTier 演示系统
   网站 URL: https://demo.example.com
   ```
   - 填写配置
   - 点击"保存设置"
   - 展示成功消息

3. **验证配置生效**
   - 刷新页面
   - 展示配置已保存
   - 说明：配置立即生效，无需重新部署

**要点**:
- ✅ 所有配置存储在数据库
- ✅ 支持动态修改
- ✅ 无需重新部署

---

### 演示 4: 用户管理 (10 分钟)

**目标**: 展示用户权限管理功能

**步骤**:

1. **注册普通用户**
   - 退出登录
   - 访问 /register
   - 注册新用户：user1@example.com
   - 展示注册成功消息

2. **查看用户列表**
   - 使用超级管理员登录
   - 访问 /settings
   - 滚动到"用户管理"部分
   - 展示用户列表（包含新注册的用户）

3. **授予管理员权限**
   - 找到 user1@example.com
   - 点击"设为管理员"
   - 展示成功消息
   - 展示用户列表更新

4. **测试管理员权限**
   - 退出登录
   - 使用 user1@example.com 登录
   - 展示可以访问管理员面板
   - 展示可以查看所有节点
   - 展示可以修改系统设置
   - 展示不能管理用户（无用户管理部分）

5. **撤销管理员权限**
   - 使用超级管理员登录
   - 访问 /settings
   - 找到 user1@example.com
   - 点击"撤销管理员"
   - 展示成功消息

6. **删除用户**
   - 点击"删除"按钮
   - 确认删除
   - 展示成功消息
   - 展示用户列表更新

**要点**:
- ✅ 超级管理员可以管理用户
- ✅ 可以授予/撤销管理员权限
- ✅ 可以删除用户
- ✅ 普通管理员不能管理用户

---

### 演示 5: 节点管理 (15 分钟)

**目标**: 展示节点 CRUD 功能

**步骤**:

1. **添加节点**
   - 访问 /dashboard
   - 点击"添加节点"
   - 填写节点信息：
     ```
     节点名称: 北京节点 1
     地域类型: 国内
     具体地区: 北京
     连接方式: TCP, 192.168.1.100, 8080
     阶梯带宽: 100 Mbps
     最大带宽: 1000 Mbps
     最大流量: 1000 GB
     重置周期: 30 天
     最大连接数: 100
     有效期至: 2025-12-31
     允许中转: 是
     标签: 测试,北京
     备注: 测试节点
     ```
   - 点击"保存"
   - 展示节点列表

2. **编辑节点**
   - 点击节点卡片的"编辑"按钮
   - 修改节点信息
   - 点击"保存"
   - 展示更新成功

3. **查看节点详情**
   - 展示节点卡片
   - 展示节点状态（离线）
   - 展示带宽、流量等信息

**要点**:
- ✅ 支持多种连接方式
- ✅ 完整的节点信息管理
- ✅ 直观的卡片式展示

---

### 演示 6: 节点上报 (10 分钟)

**目标**: 展示节点上报功能

**步骤**:

1. **准备上报脚本**
   ```bash
   cd examples
   ```

2. **配置脚本**
   - 编辑 `node_reporter.py`
   - 设置 API_URL 和 NODE_ID

3. **执行上报**
   ```bash
   python3 node_reporter.py
   ```
   - 展示上报成功消息
   - 展示上报的数据

4. **验证上报结果**
   - 刷新节点列表
   - 展示节点状态变为"在线"
   - 展示带宽、流量、连接数更新

**要点**:
- ✅ 简单的上报接口
- ✅ 自动更新节点状态
- ✅ 支持定期上报

---

### 演示 7: 客户端查询 (10 分钟)

**目标**: 展示智能负载均衡

**步骤**:

1. **准备测试数据**
   - 添加 3-5 个不同地域的节点
   - 设置不同的带宽和流量

2. **流量优先查询**
   ```bash
   python3 client_query.py query \
     --region domestic \
     --priority traffic
   ```
   - 展示查询结果
   - 展示节点按人均日流量排序

3. **带宽优先查询**
   ```bash
   python3 client_query.py query \
     --region domestic \
     --priority bandwidth
   ```
   - 展示查询结果
   - 展示节点按人均带宽排序

4. **延迟优先查询**
   ```bash
   python3 client_query.py query \
     --region domestic \
     --priority latency
   ```
   - 展示查询结果
   - 展示节点按距离排序

5. **查询公开节点**
   ```bash
   python3 client_query.py public
   ```
   - 展示所有公开节点

6. **查看统计信息**
   ```bash
   python3 client_query.py stats
   ```
   - 展示总节点数
   - 展示在线节点数
   - 展示总带宽

**要点**:
- ✅ 三种负载均衡策略
- ✅ 智能节点分配
- ✅ 灵活的查询条件

---

### 演示 8: 管理员面板 (5 分钟)

**目标**: 展示管理员功能

**步骤**:

1. **访问管理员面板**
   - 使用管理员账户登录
   - 访问 /admin
   - 展示所有节点列表

2. **查看节点详情**
   - 展示所有用户的节点
   - 展示节点状态
   - 展示节点信息

3. **管理员权限说明**
   - 管理员可以查看所有节点
   - 管理员可以修改系统设置
   - 管理员不能管理用户（只有超级管理员可以）

**要点**:
- ✅ 管理员可以查看所有节点
- ✅ 权限分级清晰
- ✅ 界面简洁直观

---

## 🎯 演示要点总结

### 核心功能

1. **系统初始化**
   - JWT 密钥验证
   - Web 界面操作
   - 一次性初始化

2. **权限管理**
   - 三级权限系统
   - 灵活的权限控制
   - 安全的用户管理

3. **系统设置**
   - 动态配置管理
   - 无需重新部署
   - 数据库存储

4. **节点管理**
   - 完整的 CRUD 功能
   - 多种连接方式
   - 实时状态监控

5. **智能负载均衡**
   - 三种优先级策略
   - 自动节点分配
   - 灵活的查询条件

### 技术亮点

- ✅ 零数据库操作初始化
- ✅ 动态配置管理
- ✅ 智能负载均衡算法
- ✅ 完整的权限系统
- ✅ 响应式设计
- ✅ 边缘计算部署

### 用户体验

- 🎯 界面简洁美观
- 🎯 操作流程清晰
- 🎯 提示信息友好
- 🎯 响应速度快
- 🎯 文档完善

## 📊 演示数据建议

### 节点数据

建议准备以下测试节点：

1. **北京节点**
   - 地域：国内 - 北京
   - 带宽：100 Mbps
   - 流量：1000 GB
   - 状态：在线

2. **上海节点**
   - 地域：国内 - 上海
   - 带宽：200 Mbps
   - 流量：2000 GB
   - 状态：在线

3. **香港节点**
   - 地域：海外 - 香港
   - 带宽：50 Mbps
   - 流量：500 GB
   - 状态：在线

4. **美国节点**
   - 地域：海外 - 美国
   - 带宽：100 Mbps
   - 流量：1000 GB
   - 状态：离线

### 用户数据

建议准备以下测试用户：

1. **超级管理员**
   - 邮箱：admin@example.com
   - 权限：超级管理员

2. **普通管理员**
   - 邮箱：manager@example.com
   - 权限：管理员

3. **普通用户 1**
   - 邮箱：user1@example.com
   - 权限：普通用户

4. **普通用户 2**
   - 邮箱：user2@example.com
   - 权限：普通用户

## 🎬 演示脚本

### 开场白 (1 分钟)

"大家好，今天我将为大家演示 EasyTier 节点管理系统。这是一个基于 Cloudflare Workers 的现代化节点管理平台，提供完整的用户管理、节点管理和智能负载均衡功能。"

### 核心功能演示 (40 分钟)

按照上述 8 个演示流程依次展示。

### 总结 (5 分钟)

"通过刚才的演示，我们可以看到：
1. 系统初始化简单安全
2. 权限管理灵活完善
3. 配置管理动态便捷
4. 节点管理功能完整
5. 负载均衡智能高效

这个系统已经可以投入生产使用，欢迎大家试用和反馈！"

### 问答环节 (10 分钟)

准备回答以下常见问题：
- 如何部署到生产环境？
- 如何配置邮件服务？
- 如何备份数据？
- 如何扩展功能？
- 性能如何？

---

**演示总时长**: 约 60 分钟  
**建议观众**: 技术人员、运维人员、产品经理  
**演示环境**: 本地开发环境或测试环境